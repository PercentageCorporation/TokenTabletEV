webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r=n("c/Tr"),i=n.n(r),o=n("M4fF"),a=n.n(o),l={name:"new-grid",created:function(){this.resource=this.$resource(this.resourceURL),this.fetchData()},data:function(){return{grips:[],rows:[],error:null,page:1,records:10}},computed:{tableBodyHeight:function(){return this.height-80}},props:{title:{type:String,default:"Griddy"},columns:{type:Array,required:!0},width:{type:String,default:"100%"},height:{type:String,default:"300"},resourceURL:{type:String,required:!0}},methods:{val:function(t,e){return a.a.get(t,e)},greaterThenMinWidth:function(t,e){var n=this.columns.find(function(e){return e.name===t}),s=parseInt(n.width)||50;return!!n&&(console.log(e,s),e>s)},onMouseDown:function(t){this.thElm=t.target.parentNode,this.startOffset=this.thElm.offsetWidth-t.pageX},onMouseMove:function(t){var e=this;if(e.thElm){var n=e.thElm.getAttribute("data-column-name"),s=e.startOffset+t.pageX;e.greaterThenMinWidth(n,s)&&(e.thElm.width=s+"px",e.syncColumnWidths())}},onMouseUp:function(t){this.thElm=void 0,this.syncColumnWidths()},fetchData:function(){var t=this;this.resource.get({results:this.records,page:this.page}).then(function(e){t.rows=e.body.results}).catch(function(){t.error="Error occured while trying to fetch data"})},setResizeGrips:function(){var t=this,e=this;i()(e.header.getElementsByTagName("th")).forEach(function(n){n.style.position="relative";var s=document.createElement("div");s.className="grip",s.innerHTML="&nbsp",s.style.top=0,s.style.right=0,s.style.bottom=0,s.style.width="5px",s.style.position="absolute",s.style.cursor="col-resize",s.addEventListener("mousedown",t.onMouseDown),n.appendChild(s),e.grips.push(s)}),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},syncColumnWidths:function(){var t=i()(this.header.getElementsByTagName("th")).map(function(t){return t.width?t.width:t.clientWidth});i()(this.body.querySelectorAll("tr:first-child>td")).forEach(function(e,n){e.width=t[n]+"px"})},handlePrevious:function(){this.page>1&&(this.page-=1,this.fetchData())},handleNext:function(){this.page+=1,this.fetchData()}},mounted:function(){var t=this;t.header=t.$el.getElementsByClassName("table-header")[0],t.body=t.$el.getElementsByClassName("table-body")[0],t.setResizeGrips(),t.syncColumnWidths()},beforeDestroy:function(){var t=this;t.grips.forEach(function(e){return e.removeEventListener("mousedown",t.onMouseDown)}),document.removeEventListener("mousemove",t.onMouseMove),document.removeEventListener("mouseup",t.onMouseUp)}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper",style:{width:t.width,height:t.height+"px"}},[n("h1",[t._v("NewGrid")]),t._v(" "),n("div",{staticClass:"grid-header"},[n("span",{staticClass:"title"},[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"grid-body",style:{height:t.tableBodyHeight+"px"}},[n("div",{staticClass:"table-header-wrapper"},[n("table",{staticClass:"table-header"},[n("tr",t._l(t.columns,function(e,s){return n("th",{key:s,attrs:{width:e.width?e.width:"100"}},[t._v(" "+t._s(e.label))])}))])]),t._v(" "),n("div",{staticClass:"table-body-wrapper"},[n("table",{staticClass:"table-body"},t._l(t.rows,function(e,s){return n("tr",{key:s},t._l(t.columns,function(s,r){return n("td",{key:r,attrs:{width:s.width?s.width:"100"}},[t._v(" "+t._s(t.val(e,s.field)))])}))}))])]),t._v(" "),n("div",{staticClass:"grid-footer"},[t.error?n("span",[t._v(t._s(t.error))]):n("div",[n("span",[n("a",{on:{click:t.handlePrevious}},[t._v("Previous")])]),t._v(" "),n("span",[t._v(t._s(t.page))]),t._v(" "),n("span",[n("a",{on:{click:t.handleNext}},[t._v("Next")])])])])])},staticRenderFns:[]};var h=n("VU/8")(l,d,!1,function(t){n("tdOA")},"data-v-7d0fe3e7",null).exports,u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello-world"},[e("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};var c=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"HelloWorld.vue"}}},u,!1,function(t){n("yHvM")},"data-v-a34230b0",null).exports,p={name:"App",components:{HelloWorld:c,NewGrid:h},data:function(){return{message:"Hello from App.vue"}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("h1",[this._v("App.vue")]),this._v("\n  "+this._s(this.message)+"\n  "),e("br"),this._v(" "),e("div",[e("hello-world")],1),this._v(" "),e("div",[e("new-grid")],1)])},staticRenderFns:[]};var f=n("VU/8")(p,v,!1,function(t){n("P7AK")},null,null).exports,m=n("/ocq");s.a.use(m.a);var g=new m.a({routes:[{path:"/",name:"HelloWorld",component:c}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:g,components:{App:f},template:"<App/>"})},P7AK:function(t,e){},tdOA:function(t,e){},yHvM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e75433536c2c99fdfbf7.js.map